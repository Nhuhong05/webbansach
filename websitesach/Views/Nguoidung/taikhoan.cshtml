@model websitesach.Models.KhachHang

@{
    ViewBag.Title = "taikhoan";
    Layout = "~/Views/layout/nguoidunglayout.cshtml";
}




    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="iq-card">
                    <div class="iq-card-body p-0">
                        <div class="iq-edit-list">
                            <ul class="iq-edit-profile d-flex nav nav-pills">
                                <li class="col-md-3 p-0">
                                    <a class="nav-link active" data-toggle="pill" href="#personal-information">
                                        Thông tin cá nhân
                                    </a>
                                </li>
                                <li class="col-md-3 p-0">
                                    <a class="nav-link" data-toggle="pill" href="#chang-pwd">
                                        Đổi mật khẩu
                                    </a>
                                </li>
                                <li class="col-md-3 p-0">
                                    <a class="nav-link" data-toggle="pill" href="#emailandsms">
                                        Dơn Hàng Của Tôi
                                    </a>
                                </li>
                                <li class="col-md-3 p-0">
                                    <a class="nav-link" data-toggle="pill" href="#emailandsms">
                                        Dơn Hàng Của Tôi
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="iq-edit-list-data">
                    <div class="tab-content">

                        @using (Html.BeginForm())
                        {
                            @Html.AntiForgeryToken()


                            <div class="tab-pane fade active show" id="personal-information" role="tabpanel">
                                <div class="iq-card">
                                    <div class="iq-card-header d-flex justify-content-between">
                                        <div class="iq-header-title">
                                            <h4 class="card-title">Thông tin cá nhân</h4>
                                        </div>
                                    </div>
                                    <div class="iq-card-body">
                                        <form>
                                            <div class="form-group row align-items-center">
                                                <div class="col-md-12">
                                                    <div class="profile-img-edit">
                                                        <img class="profile-pic" src="@Url.Content("~/Hinhanhsanpham/" + Model.HinhAnh)" alt="profile-pic">
                                                        <div class="p-image">
                                                            <i class="ri-pencil-line upload-button"></i>
                                                            <input class="file-upload" type="file" accept="image/*" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class=" row align-items-center">
                                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.TenTaiKhoan, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.TenTaiKhoan, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.TenTaiKhoan, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.MatKhau, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.MatKhau, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.MatKhau, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.Email, new { htmlAttributes = new { type = "email", @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Ngaysinh, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.Ngaysinh, new { htmlAttributes = new { type = "date", @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Ngaysinh, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Gioitinh, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.Gioitinh, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Gioitinh, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>



                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.SDT, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.SDT, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.SDT, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.DiaChi, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-10">
                                                        @Html.EditorFor(model => model.DiaChi, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.DiaChi, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="submit" class="btn btn-primary mr-2">Lưu</button>
                                            <button type="reset" class="btn iq-bg-danger">Hủy bỏ</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="tab-pane fade" id="chang-pwd" ">
                            <div class="iq-card">
                                <div class="iq-card-header d-flex justify-content-between">
                                    <div class="iq-header-title">
                                        <h4 class="card-title">Đổi mật khẩu</h4>
                                    </div>
                                </div>
                                <div class="iq-card-body">
                                    <form>
                                        <div class="form-group">
                                            <label for="cpass">Mật khẩu hiện tại:</label>
                                            <a href="javascripe:void();" class="float-right">Quên mật khẩu</a>
                                            <input type="Password" class="form-control" id="cpass" value="">
                                        </div>
                                        <div class="form-group">
                                            <label for="npass">Mật khẩu mới:</label>
                                            <input type="Password" class="form-control" id="npass" value="">
                                        </div>
                                        <div class="form-group">
                                            <label for="vpass">Xác nhận lại mật khẩu:</label>
                                            <input type="Password" class="form-control" id="vpass" value="">
                                        </div>
                                        <button type="submit" class="btn btn-primary mr-2">Gửi</button>
                                        <button type="reset" class="btn iq-bg-danger">Hủy bỏ</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="emailandsms" role="tabpanel">
                            <div class="iq-card">
                                <div class="iq-card-header d-flex justify-content-between">
                                    <div class="iq-header-title">
                                        <h4 class="card-title">Dơn Hàng Của Tôi</h4>
                                    </div>
                                </div>
                                <div class="iq-card-body">
                                    @*@Html.Action("Donhang", "Nguoidung", new { MaDonHang = Model.MaDonHang })*@

                                    @foreach (var donHang in Model.DonHangs)
                                    {
                                        <table border="1">
                                            <tr>
                                                <th>Tên Sách</th>
                                                <th>Số Lượng</th>
                                                <th>Ngày Đặt</th>
                                                <th>Ngày Giao</th>
                                                <th>Đơn Giá</th>
                                                <th>Phương Thức Thanh Toán</th>
                                                <th>Tình Trạng Giao Hàng</th>
                                                <th>Địa Chỉ</th>

                                            </tr>
                                            <tr>
                                                <td>@donHang.Sach.TenSach</td>
                                                <td>@donHang.SoLuong</td>

                                                <td>
                                                    @if (donHang.NgayDat is DateTime ngayDat && ngayDat != DateTime.MinValue)
                                                    {
                                                        @ngayDat.ToString("dd/MM/yyyy")
                                                    }
                                                </td>
                                                <td>
                                                    @if (donHang.NgayGiao is DateTime ngayGiao && ngayGiao != DateTime.MinValue)
                                                    {
                                                        @ngayGiao.ToString("dd/MM/yyyy")
                                                    }
                                                </td>

                                                <td>

                                                    @{string formattedPrice = string.Format("{0:#,##0}đ", (decimal)donHang.DonGia);}@formattedPrice
                                                </td>
                                                <td>@donHang.PhuongThucThanhToan</td>
                                                <td>@donHang.TinhTrangGiaoHang</td>
                                                <td>@donHang.KhachHang.DiaChi</td>

                                            </tr>

                                        </table>


                                    }


                                </div>
                            </div>

                        </div>
                   
                    </div>
                </div>
            </div>
        </div>

   </div>



        




